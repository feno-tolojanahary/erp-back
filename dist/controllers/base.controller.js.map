{"version":3,"sources":["../../src/controllers/base.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { DataResponse } from '@interfaces/index.interface';\r\n\r\nexport default abstract class BaseController {\r\n    \r\n    protected service: any;\r\n\r\n    constructor(Service: any) {\r\n        this.service = new Service();\r\n        this.create = this.create.bind(this);\r\n        this.getAll = this.getAll.bind(this);\r\n        this.getByCompany = this.getByCompany.bind(this);\r\n        this.update = this.update.bind(this);\r\n        this.destroy = this.destroy.bind(this);\r\n    }\r\n\r\n    public async getAll(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const allUsers = await this.service.findAll();\r\n            next({ data: allUsers, message: `Get all list` } as DataResponse);\r\n        } catch (err) {\r\n            next(err)\r\n        }\r\n    }\r\n\r\n    public async getByCompany(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const allUsers = await this.service.findByCompany(req.params.companyId);\r\n            next({ data: allUsers, message: `Get all list` } as DataResponse);\r\n        } catch (err) {\r\n            next(err)\r\n        }\r\n    }\r\n\r\n    public async create(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const data = req.body;\r\n            const createdData = await this.service.create(data);\r\n            next({ data: createdData, message: \"Data created\" } as DataResponse);\r\n        } catch(err) {\r\n            next(err)\r\n        }\r\n    }\r\n\r\n    public async update(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const id: number = parseInt(req.params.id);\r\n            const data = req.body;\r\n            const result = await this.service.update(data, id);\r\n            next({ data: result, message: \"Updated data\" });\r\n        } catch(err) {\r\n            next(err);\r\n        }\r\n    }\r\n\r\n    public async destroy(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const id: number = parseInt(req.params.id);\r\n            const result = await this.service.delete(id);\r\n            next({data: result, message: \"Deleted data\"});\r\n        } catch(err) {\r\n            next(err);\r\n        }\r\n    }\r\n}"],"names":["BaseController","getAll","req","res","next","allUsers","service","findAll","data","message","err","getByCompany","findByCompany","params","companyId","create","body","createdData","update","id","parseInt","result","destroy","delete","constructor","Service","bind"],"mappings":"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"}